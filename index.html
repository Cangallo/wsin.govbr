<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>WSIN.govbr</title>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="./css/theme.css" type="text/css" />
  <link rel="stylesheet" href="./css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="./css/highlight.css">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script type="text/javascript" src="./js/highlight.pack.js"></script>
  <script src="./js/theme.js"></script>

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> WSIN.govbr</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
            <li class="toctree-l1 ">
                <a class="" href="instalacao do ssl java/">Instalacao do ssl java</a>
            </li>
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="."></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    <li>Home</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/govbr/wsin.govbr" class="icon icon-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <h1 id="wsingovbr">WSIN.govbr</h1>
<p>Biblioteca para acessar o webservice da Imprensa Nacional para publicação e acompanhamento de envio de matérias para o Diário Oficial da União conforme <a href="http://catalogo.governoeletronico.gov.br/">documentação do webservice</a>. Essa biblioteca foi compilada para Java 7.</p>
<h1 id="exemplo-de-uso-da-biblioteca">Exemplo de uso da biblioteca</h1>
<p>A biblioteca deve estar no classpath da sua aplicação e deve existir um arquivo chamado <strong>credentials_wsin.properties</strong> com seu usuário e senha para acessar o sistema.</p>
<h2 id="exemplo-simples">Exemplo simples</h2>
<p>Com o jar na raiz execute o seguinte código no terminal:</p>
<pre><code>    &gt; java -cp wsin_govbr_1.0.0.jar:.:example/ example.Principal
</code></pre>
<p>Onde o Principal.java que está dentro da pasta <em>example</em> é:</p>
<pre><code class="java">package example;

import java.io.IOException;
import java.net.URL;
import java.util.List;

import javax.xml.datatype.DatatypeConfigurationException;

import br.gov.in.ws.ArrayOfDadosOrgao;
import br.gov.in.ws.DadosOrgao;
import br.gov.in.ws.RespostaConsultaTodosOrgaosPermitidos;
import br.gov.in.ws.ServicoIN;
import br.gov.in.ws.ServicoINPortType;

public class Principal {

    public static void main( String[] args) {
        try {
            new Principal().callWebService();
        } catch (DatatypeConfigurationException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void callWebService() throws DatatypeConfigurationException, IOException {

        ServicoIN servicoIN = new ServicoIN(new URL(&quot;https://homologwsincom.in.gov.br/services/servicoIN?wsdl&quot;));

        ServicoINPortType servicoINPortType = servicoIN.getServicoINHttpPort();

        RespostaConsultaTodosOrgaosPermitidos respostaConsultaTodosOrgaosPermitidos = servicoINPortType.consultaTodosOrgaosPermitidos();

        ArrayOfDadosOrgao arrayOfDadosOrgao = respostaConsultaTodosOrgaosPermitidos.getOrgao();

        List&lt;DadosOrgao&gt; arrayListDadosOrgao =  arrayOfDadosOrgao.getDadosOrgao();

        for (DadosOrgao dadosOrgao : arrayListDadosOrgao) {
            System.out.print(&quot;Nome: &quot;+dadosOrgao.getNomeOrgao()+&quot; - &quot;);
            System.out.println(&quot;IDSiorg: &quot;+dadosOrgao.getIdentificadorSIORG());
        }
   }
}
</code></pre>

<p>Dentro da pasta <em>example</em> possui um arquivo chamado de credentials_wsin.properties que contem duas propriedades:</p>
<pre><code>#User - Substitua pelo login e senha correto.
wsin.user=_meu_usuario_
wsin.pass=_senha_do_usuario_
</code></pre>

<p>O programa irá listar todos os órgãos permitidos para acesso ao diário oficial da união.</p>
<h2 id="exemplo-de-envio-de-materia">Exemplo de envio de matéria</h2>
<pre><code class="java">        DadosOficioPreview dados = new DadosOficioPreview();

        GregorianCalendar gregcalendar = new GregorianCalendar();
        ArrayOfDadosMateriaRequest arrayOfDadosMateriaRequest = new ArrayOfDadosMateriaRequest();

        DadosMateriaRequest dadosMateriaRequest = new DadosMateriaRequest();

        dadosMateriaRequest.setConteudo(&quot;{\\rtf1\\ansi\\deff0{\\fonttbl{\\f0 Times New Roman;}}{##ATO EXTRATO DE CONV\\u202?NIO\\par}{Esp\\u233?cie: Conv\\u234?nio N\\u186? 900511/2011. N\\u186? Processo: 23628073161201373. Convenentes: ASSOCIACAO DAS OBRAS PAVONIANAS DE ASSISTENCIAConcedente : MINISTERIO DO PLANEJAMENTO, ORCAMENTO E GESTAO, Unidade Gestora: 201013, Gest\\u227?o: 00001. Convenente : ASSOCIACAO DAS OBRAS PAVONIANAS DE ASSISTENCIA, CNPJ n\\u186? 62382395000604. Homologa\\u231?\\u227?o de Comprovantes de Execu\\u231?\\u227?o. Valor Total: R$ 100.000,00, Valor de Contrapartida: R$ 10.000,00, Valor a ser transferido ou descentralizado no exerc\\u237?cio em curso : R$ 90.000,00, Vig\\u234?ncia: 26/12/2011 a 26/12/2012. Data de Assinatura: 26/12/2011. Signat\\u225?rios: Concedente : CONCEDENTE PESSOA, CPF n\\u186? 111.111.111-11, Convenente : CONVENENTE PESSOA, CPF n\\u186? 999.999.999-99, \\par}}&quot;);
        dadosMateriaRequest.setNUP(&quot;23628073161201373&quot;);
        dadosMateriaRequest.setIdentificadorNorma(104);
        dadosMateriaRequest.setSiorgMateria(3236);

        arrayOfDadosMateriaRequest.getDadosMateriaRequest().add(dadosMateriaRequest);

        dados.setCPF(&quot;11111111111&quot;);
        dados.setDataPublicacao(DatatypeFactory.newInstance().newXMLGregorianCalendar(gregcalendar));
        dados.setMateria(arrayOfDadosMateriaRequest);
        dados.setIdentificadorJornal(1);
        dados.setUG(&quot;2256&quot;);
        dados.setEmpenho(&quot;2015NE000123&quot;);
        dados.setIdentificadorTipoPagamento(89);



        ValidacaoPreview validacaoPreview = servicoINPortType.oficioPreview(dados);

        ArrayOfDadosMateriaResponse arrayOfDadosMateriaResponse = validacaoPreview.getPublicacaoPreview();
        List&lt;DadosMateriaResponse&gt; dadosMateriaResponses = arrayOfDadosMateriaResponse.getDadosMateriaResponse();
        String pdf = null;
        for (DadosMateriaResponse dadosMateriaResponse : dadosMateriaResponses) {
            pdf = dadosMateriaResponse.getPdf();
            Decoder decoder = Base64.getMimeDecoder();
            byte[] decodedBytes = decoder.decode(pdf.getBytes(StandardCharsets.UTF_8));

            File file = new File(&quot;preview_materia.pdf&quot;);;
            FileOutputStream fop = new FileOutputStream(file);

            fop.write(decodedBytes);
            fop.flush();
            fop.close();

        }

</code></pre>

<p>O programa irá enviar a matéria e salvar o preview em pdf com o nome <strong>preview_materia.pdf</strong>. Caso a matéria esteja correta deve-se confirmar o envio da matéria:</p>
<pre><code class="java">        servicoINPortType.oficioConfirmacao(dadosOficioConfirmacao);
</code></pre>

<p>E deve-se preencher os dados de confirmação conforme a documentação no item <strong>4.2. Interface de Confirmação de envio de Ofício</strong></p>
<blockquote>
<p>Atenção de o RTF deve estar conforme <a href="http://portal.in.gov.br/servicos/legislacao-de-publicacao/portaria-no-268.pdf">portaria 268 de 2009 da Imprensa Nacional</a></p>
</blockquote>

            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="instalacao do ssl java/" class="btn btn-neutral float-right" title="Instalacao do ssl java"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
            <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
        
      <span><a href="" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="instalacao do ssl java/" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>
</body>
</html>